{% extends "tasks/tasks_layout.html" %}
{% block title %}Today{% endblock %}
{% block content %}
    {% if tasks or done_tasks%}
        <h3>Current task</h3>
        {% if tasks[0] %}
            <div id="task-{{ tasks[0].id }}">
                <table>
                    <tbody>
                        <tr>
                            <td class="checker">
                                <div class="complete-btn"></div>
                            </td>
                            <td class="task-content">
                                <div class="text-white task-description">{{ tasks[0].description }}</div>
                                {% for tag in categories[tasks[0].id] %}
                                    <span id="badge-tag-{{ tag.id }}" class="badge badge-pill badge-primary">{{ tag.name }}</span>
                                {% endfor %}
                            </td>
                            <td>
                                <div class="delete-btn">Delete</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        {% endif %}
        <h4 id="other-tasks-header">Other tasks</h4>
        <ul class="task-list">
            {% for task in tasks[1:] %}
                <li id="task-{{ task.id }}" class="task">
                    <table class="task-item">
                        <tbody>
                            <tr>
                                <td class="checker">
                                    <div class="complete-btn"></div>
                                </td>
                                <td class="task-content">
                                    <div class="text-white task-description">{{ task.description }}</div>
                                    {% for tag in categories[task.id] %}
                                        <span id="badge-tag-{{ tag.id }}" class="badge badge-pill badge-primary">{{ tag.name }}</span>
                                    {% endfor %}
                                </td>
                                <td>
                                    <div class="task-btn delete-btn">Delete</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </li>
            {% endfor %}
            {% for task in done_tasks %}
                <li id="task-{{ task.id }}" class="task">
                    <table class="task-item">
                        <tbody>
                            <tr>
                                <td class="task-content">
                                    <div class="text-white task-description">{{ task.description }}</div>
                                    {% for tag in categories[task.id] %}
                                        <span id="badge-tag-{{ tag.id }}" class="badge badge-pill badge-primary">{{ tag.name }}</span>
                                    {% endfor %}
                                </td>
                                <td>
                                    <div class="task-btn undo-btn">Undo</div>
                                </td>
                                <td>
                                    <div class="task-btn delete-btn">Delete</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <h3>No tasks!</h3>
    {% endif %}
{% endblock %}
{% block nav_today %} <a class="nav-item nav-link active" href="{{ url_for('tasks_today') }}">Today</a> {% endblock %}
